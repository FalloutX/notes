<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">

	<title>L1: Data Analysis Process - FalloutX Notes</title>

        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome-4.0.3.css" rel="stylesheet">
        <link rel="stylesheet" href="../../../css/highlight.css">
        <link href="../../../css/base.css" rel="stylesheet">
        <link href="../../../app.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href="../../..">FalloutX Notes</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
              
                
                    <li  >
                        <a href="../../..">Home</a>
                    </li>
                
              
            
              
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Notes <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../elixir_getting_started/">Elixir Getting Started</a>
</li>

                        
                            
<li >
    <a href="../../pwa_notes/">Progressive Web Apps</a>
</li>

                        
                            
<li >
    <a href="../../datavis_notes/">Data Visualization</a>
</li>

                        
                            
<li >
    <a href="../../redux_notes/">Redux</a>
</li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Ruby</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../ruby/ruby_part_1_codeacademy/">Ruby Notes P1 - CodeAcademy</a>
</li>

        
            
<li >
    <a href="../../ruby/ruby_part_2_explanations/">Ruby Notes P2 - Explantions</a>
</li>

        
            
<li >
    <a href="../../ruby/ruby_part_3_ruby_monk_intro/">Ruby Notes P3 - Ruby Monk</a>
</li>

        
            
<li >
    <a href="../../ruby/ruby_part_4/">Ruby Notes P4 - Ruby Monk Primer Ascent</a>
</li>

        
    </ul>
  </li>

                        
                            
  <li class="dropdown-submenu">
    <a tabindex="-1" href="">Data Analysis</a>
    <ul class="dropdown-menu">
        
            
<li class="active">
    <a href="./">L1: Data Analysis Process</a>
</li>

        
            
<li >
    <a href="../l2-numpy-and-pandas-for-1d-data/">L2: Numpy and Pandas for 1D Data</a>
</li>

        
    </ul>
  </li>

                        
                        </ul>
                    </li>
                
              
            
              
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../../resources/learning_ruby/">Learning Ruby</a>
</li>

                        
                            
<li >
    <a href="../../../resources/general_dev_resources/">General Dev Resources</a>
</li>

                        
                        </ul>
                    </li>
                
              
            
              
            
              
            
              
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                <!-- <li >
                    <a rel="next" href="../../ruby/ruby_part_4/">
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="../l2-numpy-and-pandas-for-1d-data/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li> -->
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#lesson-1-data-analysis-process">Lesson 1: Data Analysis Process</a></li>
        
            <li><a href="#data-analysis-process">Data Analysis Process</a></li>
        
            <li><a href="#data-analysis-and-other-related-terms">Data Analysis and other related terms</a></li>
        
            <li><a href="#data-analysis-process-walkthrough-w-example-data">Data Analysis Process Walkthrough w/ Example Data.</a></li>
        
            <li><a href="#some-questions-you-could-answer-with-this-data-questions-phase">Some Questions you could answer with this data? - Questions Phase</a></li>
        
            <li><a href="#problems-with-the-data">Problems with the Data:</a></li>
        
            <li><a href="#question-phase">Question Phase</a></li>
        
            <li><a href="#drawing-conclusions-phase">Drawing Conclusions Phase</a></li>
        
            <li><a href="#correlation-does-not-imply-causation">Correlation does not imply Causation</a></li>
        
            <li><a href="#making-predictions">Making Predictions.</a></li>
        
            <li><a href="#communications-phase">Communications Phase</a></li>
        
            <li><a href="#making-graphs-and-visualization-a-little-better">Making graphs and visualization a little better</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<div id="main-content-container">
<h1 id="lesson-1-data-analysis-process"><a name="user-content-lesson-1-data-analysis-process" href="#lesson-1-data-analysis-process" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Lesson 1: Data Analysis Process</h1>
<blockquote>
<p>Based Udacity's UD170 Introduction to Data Analysis. Last Updated 7th Feb 2017.</p>
</blockquote>
<h2 id="data-analysis-process"><a name="user-content-data-analysis-process" href="#data-analysis-process" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Data Analysis Process</h2>
<p><strong>Phases</strong></p>
<p>Question Phase -&gt; Wrangling Phase -&gt; Data Exploration Phase -&gt; Drawing Conclusions Phase -&gt; Communication Phase.</p>
<ul>
<li>Not a straight path. Sometimes you need to move back and forth in this process.</li>
</ul>
<p><strong>Data</strong>: Data for this lesson was a Udacity Student Data, such as enrollments, daily engagement and project submissions.</p>
<ol>
<li><a href="../data_files/enrollments.csv">Enrollments Data</a></li>
<li><a href="../data_files/daily_engagement.csv">Daily Engagement Data</a> - Shorter Version</li>
<li><a href="../data_files/project_submissions.csv">Project Submissions Data</a></li>
</ol>
<p>Details about the data can be found <a href="../data_files/table_descriptions.txt">here</a>.</p>
<ol>
<li>
<p><strong>Question Phase</strong>:</p>
<ul>
<li>Asking Question about the Data.</li>
<li>eg. What are the Characterstics of students who pass the projects?</li>
<li>eg. How to best stock yout store to maximize profits?</li>
<li>eg. How much sleep I am getting daily?</li>
</ul>
</li>
<li>
<p><strong>Data Wrangling Phase</strong>:</p>
<ul>
<li>Data Acquistion - Getting/Storing the Data.</li>
<li>Data Cleaning - Cleaning the data for inconsistencies or missing pieces such that it doesn't have any negative effect on the entire data analysis process.</li>
</ul>
</li>
<li>
<p><strong>Data Exploration Phase</strong>:</p>
<ul>
<li>Build some Intuitions about the data. May be by looking at the raw plots of data.</li>
<li>Find Patterns</li>
</ul>
</li>
<li>
<p><strong>Drawing Conclusions Phase</strong>(Or <strong>Making Predictions Phase</strong>):</p>
<ul>
<li>Conclude/Predict based on the Exploration Phase.</li>
<li>This part usually requires some Statistics and Machine Learning.</li>
<li>Try to find answers to your questions from the Questions Page.</li>
</ul>
</li>
<li>
<p><strong>Communications Phase</strong>:</p>
<ul>
<li>This is where you communicate your findings from Conclusions/Predictions Phase.</li>
<li>It could be in form of a Blog post, Paper, Email, Powerpoint or even a simple conversation.</li>
<li>Data Visualization is almost always useful in communicate your findings.</li>
</ul>
</li>
</ol>
<h2 id="data-analysis-and-other-related-terms"><a name="user-content-data-analysis-and-other-related-terms" href="#data-analysis-and-other-related-terms" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Data Analysis and other related terms</h2>
<ul>
<li>
<p><strong>Data Science</strong>: Very Similar to Data Analysis. Mostly refers to making recommendations or predictions based on the data, while Data Analysis refers to study data to learn some features of data. May require more experience.</p>
</li>
<li>
<p><strong>Data Engineering</strong>: More Focussed on Data Wrangling part of Data Analysis. Involves data processing and storage.</p>
</li>
<li>
<p><strong>Big Data</strong>: Fuzzy term to describe "a lot of" data that today's companies collect, store, process and analyze.</p>
</li>
</ul>
<h2 id="data-analysis-process-walkthrough-w-example-data"><a name="user-content-data-analysis-process-walkthrough-w-example-data" href="#data-analysis-process-walkthrough-w-example-data" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Data Analysis Process Walkthrough w/ Example Data.</h2>
<pre><code class="python"># Reading data from a CSV file

import unicodecsv

def read_csv(filename):
    with open(filename, 'rb') as f:
        return list(unicodecsv.DictReader(f))


enrollments = read_csv('data_files/enrollments.csv')

daily_engagement = read_csv('data_files/daily_engagement.csv')

project_submissions = read_csv('data_files/project_submissions.csv')
</code></pre>

<pre><code class="python">enrollments[0]
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>{u'account_key': u'448',
 u'cancel_date': u'2015-01-14',
 u'days_to_cancel': u'65',
 u'is_canceled': u'True',
 u'is_udacity': u'True',
 u'join_date': u'2014-11-10',
 u'status': u'canceled'}
</code></pre>
<pre><code class="python">daily_engagement[0]
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>{u'acct': u'0',
 u'lessons_completed': u'0.0',
 u'num_courses_visited': u'1.0',
 u'projects_completed': u'0.0',
 u'total_minutes_visited': u'11.6793745',
 u'utc_date': u'2015-01-09'}
</code></pre>
<pre><code class="python">project_submissions[0]
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>{u'account_key': u'256',
 u'assigned_rating': u'UNGRADED',
 u'completion_date': u'2015-01-16',
 u'creation_date': u'2015-01-14',
 u'lesson_key': u'3176718735',
 u'processing_state': u'EVALUATED'}
</code></pre>
<pre><code class="python"># Cleaning / Fixing Data Types

from datetime import datetime as dt

def parse_date(date_str):
    return dt.strptime(date_str, &quot;%Y-%m-%d&quot;) if date_str != '' else None

def parse_maybe_int(int_str):
    return int(int_str) if int_str != '' else None
</code></pre>

<pre><code class="python"># Clean up the data types in the enrollments table
for enrollment in enrollments:
    enrollment['cancel_date'] = parse_date(enrollment['cancel_date'])
    enrollment['days_to_cancel'] = parse_maybe_int(enrollment['days_to_cancel'])
    enrollment['is_canceled'] = enrollment['is_canceled'] == 'True'
    enrollment['is_udacity'] = enrollment['is_udacity'] == 'True'
    enrollment['join_date'] = parse_date(enrollment['join_date'])

enrollments[0]
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>{u'account_key': u'448',
 u'cancel_date': datetime.datetime(2015, 1, 14, 0, 0),
 u'days_to_cancel': 65,
 u'is_canceled': True,
 u'is_udacity': True,
 u'join_date': datetime.datetime(2014, 11, 10, 0, 0),
 u'status': u'canceled'}
</code></pre>
<pre><code class="python"># Clean up the data types in the engagement table
for engagement_record in daily_engagement:
    engagement_record['lessons_completed'] = int(float(engagement_record['lessons_completed']))
    engagement_record['num_courses_visited'] = int(float(engagement_record['num_courses_visited']))
    engagement_record['projects_completed'] = int(float(engagement_record['projects_completed']))
    engagement_record['total_minutes_visited'] = float(engagement_record['total_minutes_visited'])
    engagement_record['utc_date'] = parse_date(engagement_record['utc_date'])

</code></pre>

<pre><code class="python">daily_engagement[0]
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>{u'acct': u'0',
 u'lessons_completed': 0,
 u'num_courses_visited': 1,
 u'projects_completed': 0,
 u'total_minutes_visited': 11.6793745,
 u'utc_date': datetime.datetime(2015, 1, 9, 0, 0)}
</code></pre>
<pre><code class="python"># Clean up the data types in the submissions table
for submission in project_submissions:
    submission['completion_date'] = parse_date(submission['completion_date'])
    submission['creation_date'] = parse_date(submission['creation_date'])

project_submissions[0]
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>{u'account_key': u'256',
 u'assigned_rating': u'UNGRADED',
 u'completion_date': datetime.datetime(2015, 1, 16, 0, 0),
 u'creation_date': datetime.datetime(2015, 1, 14, 0, 0),
 u'lesson_key': u'3176718735',
 u'processing_state': u'EVALUATED'}
</code></pre>
<h2 id="some-questions-you-could-answer-with-this-data-questions-phase"><a name="user-content-some-questions-you-could-answer-with-this-data-questions-phase" href="#some-questions-you-could-answer-with-this-data-questions-phase" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Some Questions you could answer with this data? - Questions Phase</h2>
<ul>
<li>How long did it take for students to submit the projects?</li>
<li>How many students cancelled the course?</li>
<li>How many students submitted the project?</li>
<li>How many students passed the project?</li>
<li>Correlation between daily engagement and project submissions?</li>
<li>Enrollments by time?</li>
</ul>
<p><a href="https://discussions.udacity.com/t/share-questions-about-student-data/37972/3">More from the forums</a></p>
<pre><code class="python">for engagement in daily_engagement:
    engagement['account_key'] = engagement['acct']
    engagement.pop('acct', None)

daily_engagement[0]
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>{'account_key': u'0',
 u'lessons_completed': 0,
 u'num_courses_visited': 1,
 u'projects_completed': 0,
 u'total_minutes_visited': 11.6793745,
 u'utc_date': datetime.datetime(2015, 1, 9, 0, 0)}
</code></pre>
<pre><code class="python">daily_engagement[0]['account_key']
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>u'0'
</code></pre>
<p><pre><code class="python"># Finding No of unique student keys &amp; no of csv rows.

def get_no_of_uniques(dataset, unique_key='account_key'):
    unique = set()

    for data in dataset:
        unique.add(data[unique_key])

    return len(unique), unique




enrollment_num_rows = len(enrollments)
enrollment_num_unique_students, enrollment_set_unique_students  = get_no_of_uniques(enrollments)

engagement_num_rows = len(daily_engagement)
engagement_num_unique_students, engagement_set_unique_students = get_no_of_uniques(daily_engagement)

submission_num_rows = len(project_submissions)
submission_num_unique_students, submission_set_unique_students = get_no_of_uniques(project_submissions)

print(&quot;enrollment_num_rows: %d&quot; % enrollment_num_rows)
print(&quot;enrollment_num_unique_students: %d&quot; % enrollment_num_unique_students)

print(&quot;engagement_num_rows: %d&quot; % engagement_num_rows)
print(&quot;engagement_num_unique_students: %d&quot; % engagement_num_unique_students)

print(&quot;submission_num_rows: %d&quot; % submission_num_rows)
print(&quot;submission_num_unique_students: %d&quot; % submission_num_unique_students)
</code></pre>
<strong>OUTPUT</strong></p>
<pre><code>enrollment_num_rows: 1640
enrollment_num_unique_students: 1302
engagement_num_rows: 136240
engagement_num_unique_students: 1237
submission_num_rows: 3642
submission_num_unique_students: 743
</code></pre>
<h2 id="problems-with-the-data"><a name="user-content-problems-with-the-data" href="#problems-with-the-data" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Problems with the Data:</h2>
<ol>
<li>
<p>There are more unique students in the enrollments table than in the engagements table. [Engagement table is supposed to have 1 row per enrolled student per day]</p>
</li>
<li>
<p>The unique account key is named <code>account_key</code> in 2 tables while its called <code>acct</code> in the engagements table. This is not a big issue, but an convenience. I'll fix this below. ["I have moved this code above"]</p>
</li>
</ol>
<h4 id="investigating-this-missing-data"><strong>Investigating this missing data</strong>:</h4>
<ul>
<li>Identify surprising data points -&gt; Enrollment records with no engagement records.</li>
<li>Print out one/more of the surprising data points.</li>
<li>Fix any problems you find with the data<ul>
<li>More Investigation may be needed.</li>
<li>Or there might not be a problem. Missing data may be natural.</li>
</ul>
</li>
</ul>
<p><pre><code class="python"># Investigating surprising data:

for enrollment in enrollments:
    if enrollment['account_key'] not in engagement_set_unique_students and enrollment['days_to_cancel'] &gt; 0:
        print(&quot;enrollment not in engagement %s&quot; % enrollment)



</code></pre>
<strong>OUTPUT</strong></p>
<pre><code>enrollment not in engagement {u'status': u'canceled', u'is_udacity': True, u'is_canceled': True, u'join_date': datetime.datetime(2015, 1, 10, 0, 0), u'account_key': u'1304', u'cancel_date': datetime.datetime(2015, 3, 10, 0, 0), u'days_to_cancel': 59}
enrollment not in engagement {u'status': u'canceled', u'is_udacity': True, u'is_canceled': True, u'join_date': datetime.datetime(2015, 3, 10, 0, 0), u'account_key': u'1304', u'cancel_date': datetime.datetime(2015, 6, 17, 0, 0), u'days_to_cancel': 99}
</code></pre>
<pre><code class="python"># Removing all the udacity test accounts from my data.

udacity_test_accounts = set()

for enrollment in enrollments:
    if enrollment['is_udacity']:
        udacity_test_accounts.add(enrollment['account_key'])

len(udacity_test_accounts)

def remove_udacity_accounts(dataset):
    return filter(lambda x: x['account_key'] not in udacity_test_accounts, dataset)


non_udacity_enrollments = remove_udacity_accounts(enrollments)
non_udacity_engagements = remove_udacity_accounts(daily_engagement)
non_udacity_submissions = remove_udacity_accounts(project_submissions)

len(non_udacity_enrollments), len(non_udacity_engagements), len(non_udacity_submissions)
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>(1622, 135656, 3634)
</code></pre>
<h2 id="question-phase"><a name="user-content-question-phase" href="#question-phase" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Question Phase</h2>
<p><strong>Question</strong>: (to Explore) How do numbers in daily Engagement differ for students who pass the first project?</p>
<h4 id="problems-with-this-question"><a name="user-content-problems-with-this-question" href="#problems-with-this-question" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Problems with this question</h4>
<ol>
<li>This will include data from after the project.</li>
<li>This compares data from different lengths of time</li>
<li>Includes Engagement in courses not related to the first project</li>
</ol>
<p>Revision: Only look at engagement from the first week and exclude students who cancelled within a week(trial students).</p>
<pre><code class="python"># Create a dictionary of students who either
# - haven't cancelled yet
# - stayed enrolled for more than 7 days.

# key - 'account_key', value - `date of enrollment`
# Name the dictionary paid_students

paid_students = {}

for enrollment in non_udacity_enrollments:
    if enrollment['days_to_cancel'] is None or enrollment['days_to_cancel'] &gt; 7:
        account_key = enrollment['account_key']
        join_date = enrollment['join_date']

        if account_key not in paid_students or \
            enrollment['join_date'] &gt; paid_students[account_key]:
            paid_students[account_key] = enrollment['join_date']

len(paid_students)
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>995
</code></pre>
<h3 id="getting-data-from-first-week"><a name="user-content-getting-data-from-first-week" href="#getting-data-from-first-week" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Getting Data from First Week</h3>
<pre><code class="python"># Takes a student's join date and the date of a specific engagement record,
# and returns True if that engagement record happened within one week
# of the student joining.
def within_one_week(join_date, engagement_date):
    time_delta = engagement_date - join_date
    return time_delta.days &lt; 7 and time_delta.days &gt;= 0
</code></pre>

<pre><code class="python">## Remove Free Trial Records:

def remove_free_trial_cancels(dataset):
    return filter(lambda x: x['account_key'] in paid_students, dataset)

paid_enrollments = remove_free_trial_cancels(non_udacity_enrollments)
paid_engagements = remove_free_trial_cancels(non_udacity_engagements)
paid_submissions = remove_free_trial_cancels(non_udacity_submissions)



len(paid_enrollments), len(paid_engagements), len(paid_submissions)
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>(1293, 134549, 3618)
</code></pre>
<pre><code class="python">for engagement in paid_engagements :
    engagement['has_visited'] = 1 if engagement['num_courses_visited'] &gt; 0 else 0
</code></pre>

<p><pre><code class="python">## Create a list of rows from the engagement table including only rows where
## the student is one of the paid students you just found, and the date is within
## one week of the student's join date.


paid_engagement_in_first_week = filter(lambda x: within_one_week(paid_students[x['account_key']], x['utc_date']),
                                       paid_engagements)

len(paid_engagement_in_first_week)

</code></pre>
<strong>OUTPUT</strong></p>
<pre><code>6919
</code></pre>
<p><strong>Next Task</strong>: Finding Average minutes spent in the classroom?</p>
<ol>
<li>Group <code>paid_engagement_in_the_first_week</code> by account_key.</li>
<li>Average each group.</li>
<li>Average all the group averages.</li>
</ol>
<p><pre><code class="python">from collections import defaultdict


def group_data(dataset, group_by_key):
    grouped_data = defaultdict(list)

    for row in dataset:
        grouped_data[row[group_by_key]].append(row)

    return grouped_data

engagement_by_account = group_data(paid_engagement_in_first_week, 'account_key')


len(engagement_by_account)
</code></pre>
<strong>OUTPUT</strong></p>
<pre><code>995
</code></pre>
<pre><code class="python">def sum_grouped_items(grouped_data, field_name):
    summed_data = defaultdict(int)

    for key, rows in grouped_data.items():
        for row in rows:
            summed_data[key] += row[field_name]

    return summed_data

total_minutes_by_account = sum_grouped_items(engagement_by_account, 'total_minutes_visited')

total_minutes_by_account.items()[7]
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>(u'347', 713.3479524992999)
</code></pre>
<p><pre><code class="python">import numpy as np


def describe_data(data, title=None):
    if title is not None:
        print(&quot;====%s====&quot; % title)
    print(&quot;Mean : %s&quot; % np.mean(data))
    print(&quot;Standard Deviation : %s&quot; % np.std(data))
    print(&quot;Min : %s&quot; % np.min(data))
    print(&quot;Max : %s&quot; % np.max(data))

total_minutes = total_minutes_by_account.values()

describe_data(total_minutes)
</code></pre>
<strong>OUTPUT</strong></p>
<pre><code>Mean : 306.708326753
Standard Deviation : 412.996933409
Min : 0.0
Max : 3564.7332645
</code></pre>
<pre><code class="python"># Tracking down the student with maximum no of minutes
student_with_max_minutes = None
max_minutes = 0

for student, total_minutes in total_minutes_by_account.items():
    if total_minutes &gt; max_minutes:
        max_minutes = total_minutes
        student_with_max_minutes = student

student_with_max_minutes, max_minutes
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>(u'163', 3564.7332644989997)
</code></pre>
<pre><code class="python"># Engagements records for a given student: with max_minutes

engagement_reocords_for_student_with_max_minutes = filter(lambda x: x['account_key'] == student_with_max_minutes,
                                                          paid_engagement_in_first_week)
engagement_reocords_for_student_with_max_minutes
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>[{'account_key': u'163',
  'has_visited': 1,
  u'lessons_completed': 4,
  u'num_courses_visited': 4,
  u'projects_completed': 0,
  u'total_minutes_visited': 850.519339666,
  u'utc_date': datetime.datetime(2015, 7, 9, 0, 0)},
 {'account_key': u'163',
  'has_visited': 1,
  u'lessons_completed': 6,
  u'num_courses_visited': 6,
  u'projects_completed': 0,
  u'total_minutes_visited': 872.633923334,
  u'utc_date': datetime.datetime(2015, 7, 10, 0, 0)},
 {'account_key': u'163',
  'has_visited': 1,
  u'lessons_completed': 6,
  u'num_courses_visited': 2,
  u'projects_completed': 0,
  u'total_minutes_visited': 777.018903666,
  u'utc_date': datetime.datetime(2015, 7, 11, 0, 0)},
 {'account_key': u'163',
  'has_visited': 1,
  u'lessons_completed': 2,
  u'num_courses_visited': 1,
  u'projects_completed': 0,
  u'total_minutes_visited': 294.568774,
  u'utc_date': datetime.datetime(2015, 7, 12, 0, 0)},
 {'account_key': u'163',
  'has_visited': 1,
  u'lessons_completed': 1,
  u'num_courses_visited': 3,
  u'projects_completed': 0,
  u'total_minutes_visited': 471.2139785,
  u'utc_date': datetime.datetime(2015, 7, 13, 0, 0)},
 {'account_key': u'163',
  'has_visited': 1,
  u'lessons_completed': 1,
  u'num_courses_visited': 2,
  u'projects_completed': 0,
  u'total_minutes_visited': 298.778345333,
  u'utc_date': datetime.datetime(2015, 7, 14, 0, 0)},
 {'account_key': u'163',
  'has_visited': 0,
  u'lessons_completed': 0,
  u'num_courses_visited': 0,
  u'projects_completed': 0,
  u'total_minutes_visited': 0.0,
  u'utc_date': datetime.datetime(2015, 7, 15, 0, 0)}]
</code></pre>
<p><strong>Next Task</strong>: Finding Average lessons completed in the classroom?
- <del>Group paid_engagement_in_the_first_week by account_key.</del>
- Calculate sum for each group.
- Average all the group sums.</p>
<p><pre><code class="python">total_lessons_completed_by_account = sum_grouped_items(engagement_by_account, 'lessons_completed')

total_lessons_completed = total_lessons_completed_by_account.values()

describe_data(total_lessons_completed)

</code></pre>
<strong>OUTPUT</strong></p>
<pre><code>Mean : 1.63618090452
Standard Deviation : 3.00256129983
Min : 0
Max : 36
</code></pre>
<p><pre><code class="python">student_visits_by_account = sum_grouped_items(engagement_by_account, 'has_visited')
student_visits = student_visits_by_account.values()
describe_data(student_visits)
</code></pre>
<strong>OUTPUT</strong></p>
<pre><code>Mean : 2.86733668342
Standard Deviation : 2.25519800292
Min : 0
Max : 7
</code></pre>
<pre><code class="python">## Create two lists of engagement data for paid students in the first week.
## The first list should contain data for students who eventually pass the
## subway project, and the second list should contain data for students
## who do not.

pass_subway_project = set()

subway_project_lesson_keys = ['746169184', '3176718735']

for submission in paid_submissions:
    if submission['assigned_rating'] in ['PASSED', 'DISTINCTION'] and\
    submission['lesson_key'] in subway_project_lesson_keys:
        pass_subway_project.add(submission['account_key'])


passing_engagement = filter(lambda x: x['account_key'] in pass_subway_project,
                            paid_engagement_in_first_week)
non_passing_engagement = filter(lambda x: x['account_key'] not in pass_subway_project,
                                paid_engagement_in_first_week)

len(pass_subway_project), len(passing_engagement), len(non_passing_engagement), len(paid_engagement_in_first_week)
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>(647, 4527, 2392, 6919)
</code></pre>
<pre><code class="python">## Compute some metrics you're interested in and see how they differ for
## students who pass the subway project vs. students who don't. A good
## starting point would be the metrics we looked at earlier (minutes spent
## in the classroom, lessons completed, and days visited).

passing_engagements_by_account = group_data(passing_engagement, 'account_key')
non_passing_engagements_by_account = group_data(non_passing_engagement, 'account_key')


</code></pre>

<pre><code class="python"># ====Lessons completed by passing students====
total_lessons_completed_by_passing_students_by_account = sum_grouped_items(passing_engagements_by_account,
                                                                           'lessons_completed')
total_lessons_completed_by_passing_students = total_lessons_completed_by_passing_students_by_account.values()

describe_data(total_lessons_completed_by_passing_students, &quot;Lessons completed by passing students in the first week&quot;)

# ====Lessons completed by non passing students====
total_lessons_completed_by_non_passing_students_by_account = sum_grouped_items(non_passing_engagements_by_account,
                                                                           'lessons_completed')
total_lessons_completed_by_non_passing_students = total_lessons_completed_by_non_passing_students_by_account.values()

describe_data(total_lessons_completed_by_non_passing_students, &quot;Lessons completed by non passing students in the first week&quot;)

</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>====Lessons completed by passing students in the first week====
Mean : 2.05255023184
Standard Deviation : 3.14222705558
Min : 0
Max : 36
====Lessons completed by non passing students in the first week====
Mean : 0.862068965517
Standard Deviation : 2.54915994183
Min : 0
Max : 27
</code></pre>
<pre><code class="python"># ====Minutes spent by passing students====
total_minutes_spent_by_passing_students_by_account = sum_grouped_items(passing_engagements_by_account,
                                                                           'total_minutes_visited')
total_minutes_spent_by_passing_students = total_minutes_spent_by_passing_students_by_account.values()

describe_data(total_minutes_spent_by_passing_students, &quot;Minutes spent by passing students in the first week&quot;)

# ====Minutes spent by non passing students====
total_minutes_spent_by_non_passing_students_by_account = sum_grouped_items(non_passing_engagements_by_account,
                                                                           'total_minutes_visited')
total_minutes_spent_by_non_passing_students = total_minutes_spent_by_non_passing_students_by_account.values()

describe_data(total_minutes_spent_by_non_passing_students, &quot;Minutes spent by non passing students in the first week&quot;)

</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>====Minutes spent by passing students in the first week====
Mean : 394.586046484
Standard Deviation : 448.499519327
Min : 0.0
Max : 3564.7332645
====Minutes spent by non passing students in the first week====
Mean : 143.326474267
Standard Deviation : 269.538619011
Min : 0.0
Max : 1768.52274933
</code></pre>
<pre><code class="python"># ====Days Visited by passing students====
total_days_visited_by_passing_students_by_account = sum_grouped_items(passing_engagements_by_account,
                                                                           'has_visited')
total_days_visited_by_passing_students = total_days_visited_by_passing_students_by_account.values()

describe_data(total_days_visited_by_passing_students, &quot;Days Visited by passing students in the first week&quot;)

# ====Days Visited by non passing students====
total_days_visited_by_non_passing_students_by_account = sum_grouped_items(non_passing_engagements_by_account,
                                                                           'has_visited')
total_days_visited_by_non_passing_students = total_days_visited_by_non_passing_students_by_account.values()

describe_data(total_days_visited_by_non_passing_students, &quot;Days Visited by non passing students in the first week&quot;)
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>====Days Visited by passing students in the first week====
Mean : 3.38485316847
Standard Deviation : 2.25882147092
Min : 0
Max : 7
====Days Visited by non passing students in the first week====
Mean : 1.90517241379
Standard Deviation : 1.90573144136
Min : 0
Max : 7
</code></pre>
<h3 id="making-histograms-to-visualize-data"><a name="user-content-making-histograms-to-visualize-data" href="#making-histograms-to-visualize-data" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Making Histograms to visualize data</h3>
<pre><code class="python"># A basic histogram
# To make graphs look nicer, importing seaborn

import seaborn as sns

data = [1, 2, 1, 3, 3, 1, 4, 2]
%matplotlib inline
import matplotlib.pyplot as plt
plt.hist(data)
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>(array([ 3.,  0.,  0.,  2.,  0.,  0.,  2.,  0.,  0.,  1.]),
 array([ 1. ,  1.3,  1.6,  1.9,  2.2,  2.5,  2.8,  3.1,  3.4,  3.7,  4. ]),
 &lt;a list of 10 Patch objects&gt;)
</code></pre>
<p><img alt="png" src="../output_40_2.png" /></p>
<pre><code class="python">

## Make histograms of the three metrics we looked at earlier for both
## students who passed the subway project and students who didn't. You
## might also want to make histograms of any other metrics you examined.

def plot_data(data, title=None):
    if title is not None:
        print(&quot;====%s====&quot; % title)
    plt.hist(data)

def plot_data_improved(x, title=None, x_label=None, y_label=None, **kwargs):
    plt.title(title)
    plt.xlabel(x_label)
    plt.ylabel(y_label)
    plt.hist(x, **kwargs)




plot_data(total_lessons_completed_by_passing_students, &quot;Lessons completed by passing students in the first week&quot;)
plot_data(total_lessons_completed_by_non_passing_students, &quot;Lessons completed by non passing students in the first week&quot;)
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>====Lessons completed by passing students in the first week====
====Lessons completed by non passing students in the first week====
</code></pre>
<p><img alt="png" src="../output_41_1.png" /></p>
<pre><code class="python">plot_data(total_minutes_spent_by_passing_students, &quot;Minutes spent by passing students in the first week&quot;)
plot_data(total_minutes_spent_by_non_passing_students, &quot;Minutes spent by non passing students in the first week&quot;)
</code></pre>

<p><strong>OUTPUT</strong></p>
<pre><code>====Minutes spent by passing students in the first week====
====Minutes spent by non passing students in the first week====
</code></pre>
<p><img alt="png" src="../output_42_1.png" /></p>
<p><pre><code class="python">plot_data_improved(total_days_visited_by_passing_students, &quot;Days Visited by passing students in the first week&quot;, &quot;No of days visited&quot;, None, bins=8)

</code></pre>
<strong>OUTPUT</strong></p>
<p><img alt="png" src="../output_43_0.png" /></p>
<p><pre><code class="python">plot_data_improved(total_days_visited_by_non_passing_students, &quot;Days Visited by non passing students in the first week&quot;,  &quot;No of days visited&quot;, None, bins=5)
</code></pre>
<strong>OUTPUT</strong></p>
<p><img alt="png" src="../output_44_0.png" /></p>
<h4 id="some-conclusions"><a name="user-content-some-conclusions" href="#some-conclusions" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Some conclusions:</h4>
<p>The shape of histograms for 'Minutes spent' and 'lessons learnt' are almost same for <strong>passing</strong> and <strong>non passing students</strong>.</p>
<p>The shape of histogram for 'days visited' is quite different for <strong>passing</strong> vs <strong>non passing students</strong>. For <strong>passing</strong> students, students are divided almost uniformly from 1 visits to 7 visits. While <strong>non passing students</strong>, the number of students decrease as the no of visits increases.</p>
<h2 id="drawing-conclusions-phase"><a name="user-content-drawing-conclusions-phase" href="#drawing-conclusions-phase" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Drawing Conclusions Phase</h2>
<p><strong>Tentative Conclusion</strong>: Students who passed subway project spend more minutes in the classroom during the first week.</p>
<p>Is this a true difference or due to noise in the data?</p>
<h2 id="correlation-does-not-imply-causation"><a name="user-content-correlation-does-not-imply-causation" href="#correlation-does-not-imply-causation" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Correlation does not imply Causation</h2>
<p><strong>Correlation</strong>: Students who pass the first project are more likely to visit the classroom multiple times in the first week.</p>
<p><strong>Causation</strong>: Does visiting the classroom multiple times <strong>causes</strong> the students to pass thier projects?</p>
<p><a href="http://tylervigen.com/spurious-correlations">Per Capita cheese consumption correlates with Number of people who died by becoming tangle in their bedsheets</a></p>
<p><img alt="Per Capita cheese consumption correlates with Number of people who died by becoming tangle in their bedsheets" src="http://i.imgur.com/xbzBHLp.png" /></p>
<p><strong>Third factors that could cause visiting the classroom and passing the project</strong></p>
<ul>
<li>(Higher) Level of interest</li>
<li>(Lack Of) Background Knowledge causing students to visited the classroom less frequently and failing the project.</li>
</ul>
<p><strong>Or</strong>, This correlation could be because of causation.</p>
<h2 id="making-predictions"><a name="user-content-making-predictions" href="#making-predictions" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Making Predictions.</h2>
<p><strong>Q</strong>: Which students are <strong>likely to pass</strong> thier first project?</p>
<p>Could take a first pass using heuristics, but getting a really good predicition could be really difficult!
- Lots of different pieces of information to look at.
- Different features of the information set can interact with each other making it harder to predict by heuristics
- <strong>Machine Learning</strong> can make predicitions automatically.</p>
<h2 id="communications-phase"><a name="user-content-communications-phase" href="#communications-phase" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Communications Phase</h2>
<table>
<thead>
<tr>
<th>What findings are most important?</th>
<th>How will you present them?</th>
</tr>
</thead>
<tbody>
<tr>
<td>Difference in total minutes for passing vs non-passing students</td>
<td>Report Average minutes spent</td>
</tr>
<tr>
<td>Difference in days visited</td>
<td>Show histograms (Polish your visualizations first!!)</td>
</tr>
</tbody>
</table>
<h2 id="making-graphs-and-visualization-a-little-better"><a name="user-content-making-graphs-and-visualization-a-little-better" href="#making-graphs-and-visualization-a-little-better" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Making graphs and visualization a little better</h2>
<ul>
<li><strong>Add labels and titles</strong>: to add axis labels use <code>plt.xlabel("Label for x axis")</code> and <code>plt.ylabel("Label for y axis")</code></li>
<li>to set the graph title, use <code>plt.title("Title of plot")</code></li>
<li>import <code>seaborn</code> to make graphs look nicer.</li>
<li>fine-tune your graphs to make them look better</li>
</ul>
<p>Made the above changes in my graphs.</p>
<p>-- <a href="http://matplotlib.org/api/pyplot_api.html">Pyplot API Docs</a></p>
</div>

<div id="progress-bar"></div></div>
        </div>

        <footer class="col-md-12">
            <hr>
            
            <center>This site is built with <a href="http://www.mkdocs.org/"> MkDocs</a>.</center>
        </footer>

        <script src="../../../js/jquery-1.10.2.min.js"></script>
        <script src="../../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../../js/highlight.pack.js"></script>
        <script>var base_url = '../../..';</script>
        <script data-main="../../../mkdocs/js/search.js" src="../../../mkdocs/js/require.js"></script>
        <script src="../../../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>